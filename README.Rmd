---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
    collapse = TRUE,
    comment = "#>",
    fig.path = "README-"
)
```

<!-- badges: start -->
[![CRAN status](https://www.r-pkg.org/badges/version/konfound)](https://cran.r-project.org/package=konfound)
[![R-CMD-check](https://github.com/konfound-project/konfound/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/konfound-project/konfound/actions/workflows/R-CMD-check.yaml)
[![codecov](https://codecov.io/gh/konfound-project/konfound/graph/badge.svg?token=ARijYlxn7O)](https://app.codecov.io/gh/konfound-project/konfound)
[![DOI](https://joss.theoj.org/papers/10.21105/joss.05779/status.svg)](https://doi.org/10.21105/joss.05779)
<!-- badges: end -->

# konfound

In social science (and educational) research, we often wish to understand how robust inferences about effects are to unobserved (or controlled for) covariates, possible problems with measurement, and other sources of bias.  The goal of `konfound` is to carry out sensitivity analysis to help analysts to *quantify how robust inferences are to potential sources of bias*. This R package provides tools to carry out sensitivity analysis as described in Frank, Maroulis, Duong, and Kelcey (2013) based on Rubinâ€™s (1974) causal model as well as in Frank (2000) based on the impact threshold for a confounding variable.

# Installation

You can install the CRAN version of konfound with:

```{r, eval = F}
install.packages("konfound")
```

You can install the development version from GitHub with:

```{r gh-installation, eval = FALSE}
install.packages("devtools")
devtools::install_github("konfound-project/konfound")
```

# Use of konfound

## pkonfound() for published studies

`pkonfound()`, for published studies, calculates (1) how much bias there must be in an estimate to invalidate/sustain an inference; (2) the impact of an omitted variable necessary to invalidate/sustain an inference for a regression coefficient:

```{r, eval = T}
library(konfound)
```

```{r}
pkonfound(est_eff = 2, 
          std_err = .4, 
          n_obs = 100, 
          n_covariates = 3)
```

## konfound() for models fit in R

`konfound()` calculates the same for models fit in R. For example, here are the coefficients for a linear model fit with `lm()` using the built-in dataset `mtcars`:

```{r}
m1 <- lm(mpg ~ wt + hp, data = mtcars)
m1
summary(m1)
```

Sensitivity analysis for the effect for `wt` on `mpg` can be carried out as follows, specifying the fitted model object:

```{r}
konfound(m1, wt)
```

## mkonfound for meta-analyses including sensitivity analysis

We can use an existing (and built-in) dataset, such as `mkonfound_ex`.

```{r}
mkonfound_ex
mkonfound(mkonfound_ex, t, df)
```

# Other information

### How to learn more about sensitivity analysis

To learn more about sensitivity analysis, please visit:

* The [Introduction to konfound vignette](https://konfound-it.org/konfound/articles/introduction-to-konfound.html), with detailed information about each of the functions (`pkonfound()`, `konfound()`, and `mkounfound()`)
* The [Konfound-It! interactive web application](https://konfound-project.shinyapps.io/konfound-it/), with links to PowerPoints and key publications

### Issues, feature requests, and contributing

We prefer for issues to be filed via GitHub (link to the issues page for `konfound` [here](https://github.com/konfound-project/konfound/issues)) though we also welcome questions or feedback requests via email (see the DESCRIPTION file). 

Contributing guidelines are [here](https://github.com/konfound-project/konfound/blob/master/.github/CONTRIBUTING.md).

### Code of Conduct

Please note that the konfound project is released with a [Contributor Code of Conduct](https://contributor-covenant.org/version/2/1/CODE_OF_CONDUCT.html). By contributing to this project, you agree to abide by its terms.
